<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign In - NextReach AI</title>
    <link rel="icon" type="image/svg+xml" href="NextReach.svg">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="navbar-professional.css">
    <link rel="stylesheet" href="futuristic-mobile-menu.css">
    <link rel="stylesheet" href="auth.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Google Sign-In -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="index.html">
                    <img src="NextReach.svg" alt="NextReach" class="logo-nav">
                </a>
            </div>
            <ul class="nav-menu" id="nav-menu" role="menubar">
                <li class="nav-item"><a href="index.html" class="nav-link">Home</a></li>
                <li class="nav-item"><a href="services.html" class="nav-link">Services</a></li>
                <li class="nav-item"><a href="pricing.html" class="nav-link">Pricing</a></li>
                <li class="nav-item"><a href="about.html" class="nav-link">About</a></li>
            </ul>
            <div class="nav-actions">
                <a href="ai-claude.html" class="nav-btn nav-btn-ai">
                    <i class="fas fa-robot"></i>
                    <span class="nav-btn-text">AI Assistant</span>
                </a>
                <a href="booking.html" class="nav-btn nav-btn-book">
                    <i class="fas fa-calendar-check"></i>
                    <span class="nav-btn-text">Book Call</span>
                </a>
                <a href="register.html" class="nav-btn nav-btn-outline">
                    <i class="fas fa-user-plus"></i>
                    <span class="nav-btn-text">Sign Up</span>
                </a>
                <a href="pricing.html" class="nav-btn nav-btn-primary">
                    <i class="fas fa-rocket"></i>
                    <span class="nav-btn-text">Get Started</span>
                </a>
            </div>
            <button class="hamburger" 
                    type="button" 
                    aria-label="Toggle navigation menu"
                    aria-expanded="false"
                    aria-controls="nav-menu">
                <span class="bar" aria-hidden="true"></span>
                <span class="bar" aria-hidden="true"></span>
                <span class="bar" aria-hidden="true"></span>
            </button>
        </div>
    </nav>
    <div class="auth-container">
        <!-- Left Side - Branding -->
        <div class="auth-brand">
            <div class="brand-content">
                <a href="index.html" class="brand-logo">
                    <img src="NextReach.svg" alt="NextReach" class="logo-img">
                    <h1>NextReach AI</h1>
                </a>
                <h2>Personalized AI Assistant</h2>
                <p style="color: white;">Sign in to access your personalized AI experience with saved chats and custom preferences.</p>
                
                <div class="features-list">
                    <div class="feature-item">
                        <i class="fas fa-save"></i>
                        <span>Save & Resume Conversations</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-brain"></i>
                        <span>Personalized AI Responses</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-history"></i>
                        <span>Access Chat History Anytime</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-user-cog"></i>
                        <span>Custom User Preferences</span>
                    </div>
                    <div class="feature-item">
                        <i class="fas fa-shield-alt"></i>
                        <span>Secure & Private</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Right Side - Login Form -->
        <div class="auth-form-container">
            <div class="auth-form-wrapper">
                <div class="form-header">
                    <h2>Welcome back</h2>
                    <p>Sign in to continue your AI journey</p>
                </div>

                <form id="loginForm" class="auth-form">
                    <div class="form-group">
                        <label for="loginEmail">
                            <i class="fas fa-envelope"></i>
                            Email Address
                        </label>
                        <input 
                            type="email" 
                            id="loginEmail" 
                            name="email" 
                            placeholder="you@example.com"
                            required
                            autocomplete="email"
                        >
                        <span class="error-message" id="emailError"></span>
                    </div>

                    <div class="form-group">
                        <label for="loginPassword">
                            <i class="fas fa-lock"></i>
                            Password
                        </label>
                        <div class="password-input-wrapper">
                            <input 
                                type="password" 
                                id="loginPassword" 
                                name="password" 
                                placeholder="Enter your password"
                                required
                                autocomplete="current-password"
                            >
                            <button type="button" class="toggle-password" data-target="loginPassword">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <span class="error-message" id="passwordError"></span>
                    </div>

                    <div class="form-options">
                        <label class="checkbox-label">
                            <input type="checkbox" id="rememberMe" name="remember">
                            <span>Remember me</span>
                        </label>
                        <a href="#" class="forgot-password" id="forgotPasswordLink">Forgot password?</a>
                    </div>

                    <button type="submit" class="auth-btn primary" id="loginBtn">
                        <span class="btn-text">Sign In</span>
                        <span class="btn-loader">
                            <i class="fas fa-spinner fa-spin"></i>
                            Signing in...
                        </span>
                    </button>

                    <div class="form-divider">
                        <span>or continue with</span>
                    </div>

                    <div class="social-login">
                        <button type="button" class="social-btn google" id="googleSignInBtn">
                            <i class="fab fa-google"></i>
                            <span>Google</span>
                        </button>
                        <button type="button" class="social-btn microsoft">
                            <i class="fab fa-microsoft"></i>
                            <span>Microsoft</span>
                        </button>
                    </div>

                    <div class="form-footer">
                        <p>Don't have an account? <a href="#" id="showRegister" class="link-primary">Sign up</a></p>
                    </div>
                </form>

                <!-- Guest Access Notice -->
                <div class="guest-notice">
                    <i class="fas fa-info-circle"></i>
                    <p>Continue without account? <a href="ai-claude.html?guest=true" class="link-secondary">Use as Guest</a> (limited features, no chat saving)</p>
                </div>
            </div>
        </div>
    </div>

    <script src="auth.js"></script>
    <script src="futuristic-mobile-menu.js"></script>
    <script>
        // Mobile Navigation Toggle for auth pages
        const hamburger = document.querySelector('.hamburger');
        const navMenu = document.querySelector('.nav-menu');
        const navActions = document.querySelector('.nav-actions');
        
        if (hamburger && navMenu) {
            hamburger.addEventListener('click', () => {
                const isExpanded = hamburger.getAttribute('aria-expanded') === 'true';
                hamburger.setAttribute('aria-expanded', !isExpanded);
                hamburger.classList.toggle('active');
                navMenu.classList.toggle('active');
                if (navActions) {
                    navActions.classList.toggle('active');
                }
            });
        }

        // Google Sign-In Implementation
        let googleClientId = '460485871625-9f6jpaqpq0r3bk61vfsbpqqupg5l13a1.apps.googleusercontent.com';

        function handleGoogleSignIn(response) {
            try {
                // Decode JWT token
                const userObject = parseJwt(response.credential);
                console.log('Google Sign-In successful:', userObject);
                
                // Create user data object
                const userData = {
                    email: userObject.email,
                    firstName: userObject.given_name || userObject.name.split(' ')[0],
                    lastName: userObject.family_name || userObject.name.split(' ').slice(1).join(' '),
                    picture: userObject.picture,
                    googleId: userObject.sub,
                    loginMethod: 'google',
                    loginTime: new Date().toISOString()
                };
                
                // Save to localStorage
                localStorage.setItem('currentUser', JSON.stringify(userData));
                localStorage.setItem('isLoggedIn', 'true');
                
                // Redirect to AI Assistant
                window.location.href = 'ai-claude.html';
            } catch (error) {
                console.error('Google Sign-In error:', error);
                alert('Sign-in failed. Please try again.');
            }
        }

        function parseJwt(token) {
            const base64Url = token.split('.')[1];
            const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
            const jsonPayload = decodeURIComponent(atob(base64).split('').map(function(c) {
                return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
            }).join(''));
            return JSON.parse(jsonPayload);
        }

        // Initialize Google Sign-In
        window.addEventListener('load', function() {
            if (typeof google !== 'undefined' && google.accounts) {
                google.accounts.id.initialize({
                    client_id: googleClientId,
                    callback: handleGoogleSignIn,
                    auto_select: false
                });

                // Handle Google button click
                const googleBtn = document.getElementById('googleSignInBtn');
                if (googleBtn) {
                    googleBtn.addEventListener('click', function(e) {
                        e.preventDefault();
                        google.accounts.id.prompt();
                    });
                }
            }
        });
    </script>
</body>
</html>
